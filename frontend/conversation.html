<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhisperFlow - –Ø–∑—ã–∫–æ–≤–æ–π —Ç—Ä–µ–Ω–∞–∂—ë—Ä</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" href="favicon.ico">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/conversation.css">
</head>
<body class="conversation-page">
    <!-- Header -->
    <div id="header"></div>

    <!-- Main Container -->
    <div class="conversation-container">
        <!-- Settings Panel (—Å–ª–µ–≤–∞ –∏–ª–∏ —Å–≤–µ—Ä—Ö—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö) -->
        <div class="conversation-settings" id="settingsPanel">
            <div class="settings-header">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <button class="settings-close" onclick="toggleSettings()">√ó</button>
            </div>
            
            <div class="settings-body">
                <div class="setting-group">
                    <label>–Ø–∑—ã–∫ –æ–±—É—á–µ–Ω–∏—è</label>
                    <select id="languageSelect" onchange="updateLanguage()">
                        <option value="de">–ù–µ–º–µ—Ü–∫–∏–π</option>
                        <option value="en">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label>–£—Ä–æ–≤–µ–Ω—å</label>
                    <select id="levelSelect" onchange="updateLevel()">
                        <option value="A1">A1 - –ù–∞—á–∏–Ω–∞—é—â–∏–π</option>
                        <option value="A2">A2 - –ë–∞–∑–æ–≤—ã–π</option>
                        <option value="B1" selected>B1 - –°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="B2">B2 - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label>–¢–µ–º–∞ –¥–∏–∞–ª–æ–≥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                    <select id="topicSelect" onchange="updateTopic()">
                        <option value="">–ë–µ–∑ —Ç–µ–º—ã</option>
                        <!-- –¢–µ–º—ã –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </select>
                </div>
                
                <div class="setting-group">
                    <button class="btn btn-primary" onclick="startNewConversation()">–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥</button>
                </div>
            </div>
            
            <!-- Statistics -->
            <div class="settings-stats" id="statsPanel">
                <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <div class="stat-item">
                    <span class="stat-label">–°–æ–æ–±—â–µ–Ω–∏–π:</span>
                    <span class="stat-value" id="statMessages">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:</span>
                    <span class="stat-value" id="statCorrections">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–í—Ä–µ–º—è:</span>
                    <span class="stat-value" id="statTime">0 –º–∏–Ω</span>
                </div>
            </div>
        </div>

        <!-- Chat Area -->
        <div class="conversation-chat">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="chat-header-left">
                    <button class="btn-icon" onclick="toggleSettings()" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"></path>
                        </svg>
                    </button>
                    <div class="chat-title">
                        <h2 id="chatTitle">–Ø–∑—ã–∫–æ–≤–æ–π —Ç—Ä–µ–Ω–∞–∂—ë—Ä</h2>
                        <span class="chat-subtitle" id="chatSubtitle">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –∏ —É—Ä–æ–≤–µ–Ω—å</span>
                    </div>
                </div>
                <div class="chat-header-right">
                    <button class="btn-icon" onclick="showConversationHistory()" title="–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3h18v18H3zM7 7h10M7 12h10M7 17h10"></path>
                        </svg>
                    </button>
                    <a href="dashboard.html" class="btn-icon" title="–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –¥–∞—à–±–æ—Ä–¥">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"></path>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Messages Area -->
            <div class="chat-messages" id="messagesContainer">
                <div class="welcome-message" id="welcomeMessage">
                    <div class="welcome-icon">üí¨</div>
                    <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —è–∑—ã–∫–æ–≤–æ–π —Ç—Ä–µ–Ω–∞–∂—ë—Ä!</h3>
                    <p>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –Ω–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥ —Å AI-—Ç—Ä–µ–Ω–µ—Ä–æ–º.</p>
                    <p>–í—ã –º–æ–∂–µ—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—å –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω –∏–ª–∏ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç.</p>
                </div>
                <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <!-- Input Area -->
            <div class="chat-input-area">
                <div class="input-container">
                    <button class="btn-record" id="recordBtn" onclick="toggleRecording()" title="–ì–æ–≤–æ—Ä–∏—Ç—å">
                        <svg id="recordIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" x2="12" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                        <span id="recordText">–ì–æ–≤–æ—Ä–∏—Ç—å</span>
                    </button>
                    
                    <div class="recording-indicator" id="recordingIndicator" style="display: none;">
                        <div class="recording-dot"></div>
                        <span>–ó–∞–ø–∏—Å—å...</span>
                    </div>
                    
                    <input 
                        type="text" 
                        id="messageInput" 
                        placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞..."
                        onkeypress="handleInputKeyPress(event)"
                    >
                    
                    <button class="btn-send" id="sendBtn" onclick="sendMessage()" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                    </button>
                </div>
                
                <div class="input-hints">
                    <small>üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤—Ä—É—á–Ω—É—é</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤ -->
    <div id="historyModal" class="modal" style="display: none;">
        <div class="modal-backdrop" onclick="closeHistoryModal()"></div>
        <div class="modal-content" style="max-width: 600px; max-height: 80vh;">
            <div class="modal-header">
                <div class="modal-icon">üìú</div>
                <h2>–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤</h2>
                <button class="modal-close" onclick="closeHistoryModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="historyList" class="history-list">
                    <!-- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/speech-recognition.js"></script>
    <script src="js/conversation.js"></script>
</body>
</html>


