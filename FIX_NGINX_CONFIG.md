# ðŸ”§ Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Nginx

## âŒ ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:
- Ð¤Ð°Ð¹Ð» `/etc/nginx/sites-available/whisperflow` Ð¿ÑƒÑÑ‚Ð¾Ð¹
- Nginx Ð½Ðµ ÑÐ»ÑƒÑˆÐ°ÐµÑ‚ Ð¿Ð¾Ñ€Ñ‚ 80
- `curl http://173.242.53.230` Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Connection refused

## âœ… Ð ÐµÑˆÐµÐ½Ð¸Ðµ:

**ÐÐ° VPS Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:**

```bash
# 1. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½ÑƒÑŽ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ Ð´Ð»Ñ WhisperFlow
cat > /etc/nginx/sites-available/whisperflow << 'EOF'
server {
    listen 80;
    server_name app-toolbox.space www.app-toolbox.space;
    client_max_body_size 500M;

    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_connect_timeout 600s;
        proxy_send_timeout 600s;
        proxy_read_timeout 600s;
    }

    access_log /var/log/nginx/whisperflow_access.log;
    error_log /var/log/nginx/whisperflow_error.log;
}
EOF

# 2. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ñ„Ð°Ð¹Ð» ÑÐ¾Ð·Ð´Ð°Ð½ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾
cat /etc/nginx/sites-available/whisperflow

# 3. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÑÑ‹Ð»ÐºÐ° ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚
ls -la /etc/nginx/sites-enabled/whisperflow

# 4. Ð•ÑÐ»Ð¸ ÑÑÑ‹Ð»ÐºÐ¸ Ð½ÐµÑ‚, ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÐµÐµ
ln -sf /etc/nginx/sites-available/whisperflow /etc/nginx/sites-enabled/whisperflow

# 5. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
nginx -t

# 6. ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Nginx
systemctl reload nginx

# 7. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ Nginx
systemctl status nginx

# 8. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Nginx ÑÐ»ÑƒÑˆÐ°ÐµÑ‚ Ð¿Ð¾Ñ€Ñ‚ 80
netstat -tlnp | grep :80

# 9. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ñ‡ÐµÑ€ÐµÐ· IP
curl http://173.242.53.230

# 10. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° localhost:8000
curl http://localhost:8000/
```

---

## âœ… ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:

1. **cat /etc/nginx/sites-available/whisperflow** - Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
2. **nginx -t** - Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ "syntax is ok" Ð¸ "test is successful"
3. **netstat -tlnp | grep :80** - Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Nginx ÑÐ»ÑƒÑˆÐ°ÐµÑ‚ Ð¿Ð¾Ñ€Ñ‚ 80
4. **curl http://173.242.53.230** - Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ HTML ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ð²Ñ…Ð¾Ð´Ð°
5. **curl http://localhost:8000/** - Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ HTML ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ð²Ñ…Ð¾Ð´Ð°

---

## ðŸ”§ Ð•ÑÐ»Ð¸ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: curl http://localhost:8000/ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
cd /opt/whisperflow
docker compose ps

# Ð•ÑÐ»Ð¸ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚, Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
docker compose up -d

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker compose logs app --tail=50

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚
curl http://localhost:8000/health
curl http://localhost:8000/
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Nginx Ð½Ðµ ÑÐ»ÑƒÑˆÐ°ÐµÑ‚ Ð¿Ð¾Ñ€Ñ‚ 80

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
cat /etc/nginx/sites-available/whisperflow

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ Ð¿ÑƒÑÑ‚Ð¾Ð¹
wc -l /etc/nginx/sites-available/whisperflow

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Nginx
systemctl restart nginx

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ
systemctl status nginx

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
tail -f /var/log/nginx/error.log
```

---

## ðŸ“ ÐŸÐ¾ÑÐ»Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ:

Ð•ÑÐ»Ð¸ Ð²ÑÐµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚, Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚!
